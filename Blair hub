local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local UserInputService = game:GetService("UserInputService")

-- Admin and User Codes
local ADMIN_CODE = "MTLS"
local USER_CODE = "lowtaperfade"

-- User Authentication
local function authenticateUser(code)
    if code == ADMIN_CODE then
        return "Admin"
    elseif code == USER_CODE then
        return "User"
    else
        return nil
    end
end

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui", playerGui)
screenGui.Name = "GhostHuntingMenu"

-- Create Frame
local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 250, 0, 400)
frame.Position = UDim2.new(0.5, -125, 0.5, -200)
frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
frame.Draggable = true
frame.Active = true

-- Enable Dragging for Touch Screen
frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
        local dragging = true
        local dragInput = input
        local dragStart = input.Position
        local startPos = frame.Position

        local function update(input)
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)

        UserInputService.InputChanged:Connect(function(input)
            if dragging and input == dragInput then
                update(input)
            end
        end)
    end
end)

-- Create Title
local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 50)
title.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
title.Text = "Ghost Hunting Menu"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18

-- Create Evidence Indicators
local evidenceLabels = {
    "EMF Level 5",
    "Ghost Orbs",
    "Fingerprints",
    "Ghost Writing",
    "Freezing Temperatures",
    "Spirit Box"
}

for i, evidence in ipairs(evidenceLabels) do
    local label = Instance.new("TextLabel", frame)
    label.Size = UDim2.new(1, -20, 0, 30)
    label.Position = UDim2.new(0, 10, 0, 50 + (i - 1) * 35)
    label.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    label.Text = evidence
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Font = Enum.Font.SourceSans
    label.TextSize = 16
end

-- Create Ghost Type Display
local ghostTypeLabel = Instance.new("TextLabel", frame)
ghostTypeLabel.Size = UDim2.new(1, -20, 0, 30)
ghostTypeLabel.Position = UDim2.new(0, 10, 0, 50 + #evidenceLabels * 35)
ghostTypeLabel.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
ghostTypeLabel.Text = "Ghost Type: Unknown"
ghostTypeLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ghostTypeLabel.Font = Enum.Font.SourceSansBold
ghostTypeLabel.TextSize = 16

-- Function to Update Ghost Type
local function updateGhostType()
    -- This is a placeholder function. Replace with actual logic to determine ghost type.
    local ghostType = "Phantom" -- Example ghost type
    ghostTypeLabel.Text = "Ghost Type: " .. ghostType
end

-- Create Auto-Objective Button
local autoObjectiveButton = Instance.new("TextButton", frame)
autoObjectiveButton.Size = UDim2.new(1, -20, 0, 50)
autoObjectiveButton.Position = UDim2.new(0, 10, 1, -60)
autoObjectiveButton.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
autoObjectiveButton.Text = "Auto Complete Objectives"
autoObjectiveButton.TextColor3 = Color3.fromRGB(255, 255, 255)
autoObjectiveButton.Font = Enum.Font.SourceSansBold
autoObjectiveButton.TextSize = 18

-- Function to Auto Complete Objectives
local function autoCompleteObjectives()
    -- This is a placeholder function. Replace with actual logic to complete objectives.
    print("Auto completing all objectives...")
end

autoObjectiveButton.MouseButton1Click:Connect(autoCompleteObjectives)

-- Create HUD
local hud = Instance.new("ScreenGui", playerGui)
hud.Name = "GhostHuntingHUD"

local hudFrame = Instance.new("Frame", hud)
hudFrame.Size = UDim2.new(0, 200, 0, 100)
hudFrame.Position = UDim2.new(0.5, -100, 0, 0)
hudFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

local hudLabel = Instance.new("TextLabel", hudFrame)
hudLabel.Size = UDim2.new(1, 0, 1, 0)
hudLabel.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
hudLabel.Text = "Ghost Hunting"
hudLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
hudLabel.Font = Enum.Font.SourceSansBold
hudLabel.TextSize = 18

-- User Authentication Prompt
local authFrame = Instance.new("Frame", screenGui)
authFrame.Size = UDim2.new(0, 250, 0, 150)
authFrame.Position = UDim2.new(0.5, -125, 0.5, -75)
authFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

local authTitle = Instance.new("TextLabel", authFrame)
authTitle.Size = UDim2.new(1, 0, 0, 50)
authTitle.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
authTitle.Text = "Enter Access Code"
authTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
authTitle.Font = Enum.Font.SourceSansBold
authTitle.TextSize = 18

local authTextBox = Instance.new("TextBox", authFrame)
authTextBox.Size = UDim2.new(1, -20, 0, 50)
authTextBox.Position = UDim2.new(0, 10, 0, 60)
authTextBox.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
authTextBox.Text = ""
authTextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
authTextBox.Font = Enum.Font.SourceSans
authTextBox.TextSize = 16

local authButton = Instance.new("TextButton", authFrame)
authButton.Size = UDim2.new(1, -20, 0, 50)
authButton.Position = UDim2.new(0, 10, 0, 120)
authButton.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
authButton.Text = "Submit"
authButton.TextColor3 = Color3.fromRGB(255, 255, 255)
authButton.Font = Enum.Font.SourceSansBold
authButton.TextSize = 18

authButton.MouseButton1Click:Connect(function()
    local role = authenticateUser(authTextBox.Text)
    if role then
        authFrame.Visible = false
        frame.Visible = true
        hud.Visible = true
        if role == "Admin" then
            autoObjectiveButton.Visible = true
        else
            autoObjectiveButton.Visible = false
        end
    else
        authTitle.Text = "Access Denied. Try Again."
    end
end)

-- Hide the Menu and HUD initially
frame.Visible = false
hud.Visible = false

-- Update Ghost Type Periodically
while true do
    updateGhostType()
    wait(10) -- Update every 10 seconds (adjust as needed)
end
